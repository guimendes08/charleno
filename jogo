<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Caçador de Luz</title>
<style>
  body { display: flex; flex-direction: column; align-items: center; font-family: sans-serif; }
  #game {
    width: 500px; height: 500px;
    border: 2px solid #000; position: relative;
    background: #eee;
  }
  .player, .light {
    width: 20px; height: 20px; position: absolute;
  }
  .player { background: blue; }
  .light { background: yellow; border-radius: 50%; }
  button { margin-top: 10px; padding: 5px 10px; cursor: pointer; }
  
  /* Tela de Game Over */
  #overlay {
    position: absolute;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    color: white; font-size: 24px; font-weight: bold;
    display: none;
  }
  #overlay button {
    margin-top: 15px;
    padding: 8px 16px;
    font-size: 18px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h2>Caçador de Luz</h2>
<div id="game">
  <div class="player" id="player"></div>
  <div class="light" id="light"></div>
  
  <!-- Tela de Game Over -->
  <div id="overlay">
    <div id="finalScore"></div>
    <button onclick="resetGame()">Jogar de novo</button>
  </div>
</div>
<p>Pontos: <span id="score">0</span></p>

<script>
  const player = document.getElementById('player');
  const light = document.getElementById('light');
  const scoreDisplay = document.getElementById('score');
  const game = document.getElementById('game');
  const overlay = document.getElementById('overlay');
  const finalScore = document.getElementById('finalScore');

  let score = 0, px = 240, py = 240, speed = 4, keys = {};
  let lightTimer, lightTimeLimit = 4000; // 4 segundos
  let gameActive = true;

  document.addEventListener('keydown', e => keys[e.key] = true);
  document.addEventListener('keyup', e => keys[e.key] = false);

  function movePlayer() {
    if (!gameActive) return;
    if (keys['ArrowUp'] && py > 0) py -= speed;
    if (keys['ArrowDown'] && py < game.clientHeight - 20) py += speed;
    if (keys['ArrowLeft'] && px > 0) px -= speed;
    if (keys['ArrowRight'] && px < game.clientWidth - 20) px += speed;
    player.style.left = px + 'px';
    player.style.top = py + 'px';
  }

  function spawnLight() {
    const lx = Math.floor(Math.random() * (game.clientWidth - 20));
    const ly = Math.floor(Math.random() * (game.clientHeight - 20));
    light.style.left = lx + 'px';
    light.style.top = ly + 'px';

    clearTimeout(lightTimer);
    lightTimer = setTimeout(gameOver, lightTimeLimit);
  }

  function checkCollision() {
    if (!gameActive) return;
    const pRect = player.getBoundingClientRect();
    const lRect = light.getBoundingClientRect();
    if (!(pRect.right < lRect.left || 
          pRect.left > lRect.right || 
          pRect.bottom < lRect.top || 
          pRect.top > lRect.bottom)) {
      score++;
      scoreDisplay.textContent = score;
      spawnLight();
    }
  }

  function gameOver() {
    gameActive = false;
    finalScore.textContent = `Game Over! Pontos: ${score}`;
    overlay.style.display = 'flex';
  }

  function resetGame() {
    score = 0;
    scoreDisplay.textContent = score;
    px = 240; py = 240;
    overlay.style.display = 'none';
    gameActive = true;
    spawnLight();
  }

  function gameLoop() {
    movePlayer();
    checkCollision();
    requestAnimationFrame(gameLoop);
  }

  resetGame();
  gameLoop();
</script>

</body>
</html>

